<% layout('layout') -%>

<h1>🦸‍♀️ Agregar un nuevo superhéroe</h1>

<% if (errores && errores.length > 0) { %>
<ul style="color: red; list-style: disc; padding-left: 20px">
  <% errores.forEach(error => { %>
  <li><%= error %></li>
  <% }) %>
</ul>
<% } %>

<form action="/api/heroes/agregar" method="POST">
  <label for="nombreSuperHeroe">Nombre del Superhéroe *</label>
  <input
    type="text"
    name="nombreSuperHeroe"
    value="<%= superheroe?.nombreSuperHeroe || '' %>"
    required
    minlength="3"
    maxlength="60"
    pattern="\S(.*\S)?"
  />

  <label for="nombreReal">Nombre Real *</label>
  <input
    type="text"
    name="nombreReal"
    value="<%= superheroe?.nombreReal || '' %>"
    required
    minlength="3"
    maxlength="60"
    pattern="\S(.*\S)?"
  />

  <label for="edad">Edad *</label>
  <input
    type="number"
    name="edad"
    value="<%= superheroe?.edad || '' %>"
    required
    min="0"
  />

  <label for="planetaOrigen">Planeta de Origen</label>
  <input
    type="text"
    name="planetaOrigen"
    value="<%= superheroe?.planetaOrigen || '' %>"
  />

  <label for="debilidad">Debilidad</label>
  <input
    type="text"
    name="debilidad"
    value="<%= superheroe?.debilidad || '' %>"
  />

  <label for="poderes">Poderes (separados por coma) *</label>
  <input
    type="text"
    name="poderes"
    value="<%= Array.isArray(superheroe?.poderes) ? superheroe.poderes.join(', ') : superheroe?.poderes || '' %>"
    required
    title="Ingresá al menos dos poderes separados por coma. Cada poder debe tener más de 3 caracteres."
  />

  <label for="aliados">Aliados (separados por coma)</label>
  <input
    type="text"
    name="aliados"
    value="<%= Array.isArray(superheroe?.aliados) ? superheroe.aliados.join(', ') : superheroe?.aliados || '' %>"
  />

  <label for="enemigos">Enemigos (separados por coma)</label>
  <input
    type="text"
    name="enemigos"
    value="<%= Array.isArray(superheroe?.enemigos) ? superheroe.enemigos.join(', ') : superheroe?.enemigos || '' %>"
  />

  <label for="creador">Creador</label>
  <input type="text" name="creador" value="<%= superheroe?.creador || '' %>" />

  <button type="submit">Agregar Superhéroe</button>
</form>
